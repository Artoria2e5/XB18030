<h1>The WTF-8 encoding</h1>
<pre class='metadata'>
Shortname: wtf8
Status: LS
ED: http://simonsapin.github.io/wtf8/
!Issue tracking: <a href="https://github.com/SimonSapin/wtf8/issues">On GitHub</a>
!Last updated: [DATE]
Editor: Simon Sapin, Mozilla https://www.mozilla.org/, https://exyr.org/
Abstract: WTF-8 (Wobbly Transformation Format − 8-bit) is a super-set of <a>UTF-8</a> that allows unpaired <a>surrogate code points</a>. It represents in a way compatible with UTF-8 data from legacy systems such as JavaScript and Windows APIs that use <a>UTF-16</a> internally but don’t enforce the invariant that surrogates must be paired.
</pre>

<p class=logo><img src=logo-wtf8.svg width=100 height=100>


<h2 id=motivation>
Background and motivation</h2>

  <em>This section is non-normative.</em>

  Issue: Write this

<!--

Unicode 1.0 (1991): 16 bit fixed width encoding
Unicode 2.0 (1996): UTF-16, surrogates, non-BMP planes not actually used
Unicode 3.1 (2001): Starts using non-BMP planes

ECMAScript string type
    http://www.ecma-international.org/ecma-262/5.1/#sec-8.4
    [u16]

-->


<h2 id=terminology>
Terminology</h2>

  These definitions correspond to those of the
  <a href="http://www.unicode.org/glossary/">Glossary of Unicode Terms</a> [[!UNICODE]],
  except for <a>code unit</a> which is slightly different for the purpose of this specification.

  A Unicode <dfn>code point</dfn> is any value in the Unicode codespace;
  that is, the range of integers from 0 to 1114111.
  It is noted with a “U+” prefix and four to six hexadecimal digits:
  the first and last code points are U+0000 and U+10FFFF.

  The <dfn>Basic Multilingual Plane</dfn> is
  the range of <a>code points</a> from U+0000 to U+FFFF.

  A <dfn>BMP code point</dfn> is a <a>code point</a> in the <a>Basic Multilingual Plane</a>.

  A <dfn>supplementary code point</dfn>
  is a <a>code point</a> in the range from U+10000 to U+10FFFF.
  That is, a code point not in the Basic Multilingual Plane.

  A <dfn>Unicode scalar value</dfn>
  is a <a>code point</a> that is not a <a>surrogate code point</a>.
  That is, a code point in the range from U+0000 to U+D7FF, or U+E000 to U+10FFFF.

  <dfn>Unicode text</dfn> is a sequence of <a>Unicode scalar values</a>.

  <dfn>UTF-8</dfn> is an encoding of <a>Unicode text</a> using 8-bit bytes.
  Each <a>Unicode scalar value</a> is represented as a sequence of one to four bytes.

  <dfn>UTF-16</dfn> is an encoding of <a>Unicode text</a> using 16-bit <a>code units</a>.
  <a>BMP code points</a> (other than <a title="surrogate code point">surrogates</a>)
  are represented as a single <a>code unit</a> with the same value.
  <a>Supplementary code points</a>
  are represented as a <a>surrogate code unit pair</a>.

  A <a>UTF-16</a> string is <dfn>well-formed</dfn> if and only if
  it does not contain any <a>unpaired surrogate code unit</a>.

  A <dfn>code unit</dfn>, for the purpose of this specification,
  is a 16-bit integer used in <a>UTF-16</a>.
  It is noted with a “0x” prefix and four hexadecimal digits:
  the first and last code units are 0x0000 and 0xFFFF.

  Note: The byte serialization of a <a>code unit</a> (little-endian or big-endian)
  is out of scope for this specification.

  Note: Unicode also uses this term for 8-bit and 32-bit code units
  in the UTF-8 and UTF-32 encodings.


<h3 id=surrogates-code-units>
Surrogate code units</h3>

  A <dfn>lead surrogate code unit</dfn> or <dfn>high surrogate code unit</dfn>
  is a <a>code unit</a> in the range from 0xD800 to 0xDBFF.

  A <dfn>trail surrogate code unit</dfn> or <dfn>low surrogate code unit</dfn>
  is a <a>code unit</a> in the range from 0xDC00 to 0xDFFF.

  A <dfn>surrogate code unit</dfn> is
  either a <a>lead surrogate code unit</a> or a <a>trail surrogate code unit</a>.
  That is, a <a>code unit</a> in the range from 0xD800 to 0xDFFF.

  A <dfn>surrogate code unit pair</dfn> is a sequence of
  a <a>lead surrogate code unit</a> followed by a <a>trail surrogate code unit</a>.
  If <a>UTF-16</a>, it represents a <a>supplementary code point</a>.

  An <dfn>unpaired surrogate code unit</dfn> is a <a>surrogate code unit</a>
  that is not part of a <a>surrogate code unit pair</a>.


<h3 id=surrogates-code-points>
Surrogate code points</h3>

  A <dfn>lead surrogate code point</dfn> or <dfn>high surrogate code point</dfn>
  is a <a>code point</a> in the range from U+D800 to U+DBFF.

  A <dfn>trail surrogate code point</dfn> or <dfn>low surrogate code point</dfn>
  is a <a>code point</a> in the range from U+DC00 to U+DFFF.

  A <dfn>surrogate code point</dfn> is
  either a <a>lead surrogate code point</a> or a <a>trail surrogate code point</a>.
  That is, a <a>code point</a> in the range from U+D800 to U+DFFF.

  A <dfn>surrogate code point pair</dfn> is a sequence of
  a <a>lead surrogate code point</a> followed by a <a>trail surrogate code point</a>.

  An <dfn>unpaired surrogate code point</dfn> is a <a>surrogate code point</a>
  that is not part of a <a>surrogate code point pair</a>.


<h2 id=wtf16>
WTF-16</h2>

  A <dfn>WTF-16</dfn> string is an <a>UTF-16</a> string
  that is not necessarily <a>well-formed</a>.


<h2 id=wtf8>
WTF-8</h2>

  Issue: Write this
